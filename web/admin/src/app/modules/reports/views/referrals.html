<!-- Nested node template -->
<script type="text/ng-template" id="nodes_renderer.html">
  <div class="tree-node">
<!--    <div class="pull-left tree-handle" ui-tree-handle>
      <span class="fa fa-list"></span>
    </div>-->
    
    <div class="tree-node-content">
      <a class="btn btn-success btn-xs"
         ng-if="node.nodes && node.nodes.length > 0"
         data-nodrag ng-click="referralCtrl.toggle(this)">
        <span
          class="fa"
          ng-class="{
            'fa-chevron-right': collapsed,
            'fa-chevron-down': !collapsed}">
        </span>
      </a>
      
      <input type="text"
             ng-model="node.name" />
      
      <span style="width: 10px;">&nbsp;</span>
      
      <span ng-if="node.level == 1" class="btn btn-primary btn-file input-large">
        &Iacute;cono:
        <input type="file"
               ngf-change="referralCtrl.onChangeFiles($files)"
               ngf-select
               ng-model="node.icon_file"
               name="node_icon"
               accept="'image/*'" />
      </span>
      
      <img ng-if="node.icon_file" ngf-src="node.icon_file" class="thumb">
      <img ng-if="!node.icon_file && node.icon && node.icon.name"
           ng-src="{{general_variables.Host + node.icon.path}}"
           class="thumb pointer"
           ng-click="referralCtrl.openNodeImage(node)">
      
      <a ng-if="node.level == 1 || node.level == 2"
         class="pull-right btn btn-danger btn-xs"
         data-nodrag
         ng-click="referralCtrl.remove(this)">
        <span class="fa fa-trash-o"></span>
      </a>
      
      <a ng-if="(node.level == 0 && node.nodes.length < 6) || (node.level == 1 && node.nodes.length < 3)"
         class="pull-right btn btn-info btn-xs"
         data-nodrag
         ng-click="referralCtrl.newSubItem(this)"
         style="margin-right: 8px;">
        <span class="fa fa-plus"></span>
      </a>
    </div>
  </div>
  <ol ui-tree-nodes="" ng-model="node.nodes" ng-class="{hidden: collapsed}">
    <li ng-repeat="node in node.nodes" ui-tree-node ng-include="'nodes_renderer.html'">
    </li>
  </ol>
</script>

<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-10">
    <h2>Reports</h2>
    <ol class="breadcrumb">
      <li>
        <a ui-sref="admin.dashboard">Dashboard</a>
      </li>
      <li class="active">
        <strong>App Users</strong>
      </li>
    </ol>
  </div>
  
  <div class="col-lg-2">
  </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-content">
          <div class="table-responsive">
            <div ui-tree id="tree1-root" data-nodrop-enabled="true">
              <ol ui-tree-nodes ng-model="referralCtrl.tree1">
                <li ng-repeat="node in referralCtrl.tree1" ui-tree-node ng-include="'nodes_renderer.html'"></li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>